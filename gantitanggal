<?php
$message = "";

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $filename = $_POST['filename'];
    $new_date = $_POST['new_date']; // Format: YYYY-MM-DD HH:MM:SS

    // Cek apakah file ada
    if (file_exists($filename)) {
        // Konversi string tanggal ke timestamp
        $timestamp = strtotime($new_date);

        if ($timestamp) {
            // Proses mengubah tanggal file
            if (touch($filename, $timestamp)) {
                $message = "<b>Sukses!</b> Tanggal file <i>$filename</i> berhasil diubah jadi " . date("Y-m-d H:i:s", $timestamp);
            } else {
                $message = "<b>Gagal!</b> Nggak bisa ubah tanggal. Cek permission file/folder.";
            }
        } else {
            $message = "<b>Error!</b> Format tanggal salah.";
        }
    } else {
        $message = "<b>Error!</b> File <i>$filename</i> nggak ketemu.";
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>File Date Changer</title>
    <style>
        body { font-family: sans-serif; margin: 40px; line-height: 1.6; }
        .container { max-width: 500px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        input { width: 100%; padding: 10px; margin: 10px 0; display: block; box-sizing: border-box; }
        button { background: #007bff; color: white; border: none; padding: 10px 15px; cursor: pointer; border-radius: 4px; }
        .msg { padding: 10px; background: #f4f4f4; border-left: 5px solid #007bff; margin-bottom: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Ganti Tanggal File</h2>
    
    <?php if ($message): ?>
        <div class="msg"><?php echo $message; ?></div>
    <?php endif; ?>

    <form method="POST">
        <label>Nama File (beserta path, misal: <code>gambar.jpg</code> atau <code>folder/data.txt</code>):</label>
        <input type="text" name="filename" placeholder="nama_file.ext" required>

        <label>Tanggal & Jam Baru:</label>
        <input type="text" name="new_date" placeholder="Contoh: 2023-12-31 23:59:59" value="<?php echo date('Y-m-d H:i:s'); ?>" required>

        <button type="submit">Update Tanggal</button>
    </form>
</div>

</body>
</html>
